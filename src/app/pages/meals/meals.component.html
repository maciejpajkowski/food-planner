<app-header>Meals</app-header>
<div class="container">
	<button type="button" mat-raised-button color="primary" (click)="onAddNewMealClick()">âž• Add a new meal</button>

	<mat-divider></mat-divider>

	<table mat-table [dataSource]="meals$">
		<ng-container matColumnDef="title">
			<th mat-header-cell *matHeaderCellDef> Title </th>
			<td mat-cell *matCellDef="let meal"> {{ meal.name }} </td>
		</ng-container>

		<ng-container matColumnDef="ingredients">
			<th mat-header-cell *matHeaderCellDef> Ingredients </th>
			<td mat-cell *matCellDef="let meal">
				@for (ingredient of meal.ingredients; track ingredient; let last = $last) {
					@if (!last) {
						{{ ingredient }},
					} @else {
						{{ ingredient }}
					}
				} @empty {
					<i>No ingredients</i>
				}
			</td>
		</ng-container>

		<ng-container matColumnDef="tags">
			<th mat-header-cell *matHeaderCellDef> Tags </th>
			<td mat-cell *matCellDef="let meal">
				<mat-chip-listbox>
					@for (tag of meal.tags; track tag) {
						<mat-chip>{{ tag }}</mat-chip>
					}
				</mat-chip-listbox>
			</td>
		</ng-container>

		<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
		<tr mat-row (click)="onMealClick(meal)" *matRowDef="let meal; columns: displayedColumns;"></tr>
	</table>
</div>
